# BAC4 v2.0.0 Release Notes

**Release Date:** 2025-10-19

## Major Update: 7-Layer Enterprise Architecture Model

BAC4 v2.0.0 represents a significant evolution from the original 3-layer C4 model to a comprehensive 7-layer enterprise architecture framework.

---

## What's New

### 7-Layer Architecture Model

BAC4 now supports a complete enterprise architecture stack:

1. **Layer 1: Market** - Market segments, customer needs, competitors, trends
2. **Layer 2: Organisation** - Business units, departments, teams, locations
3. **Layer 3: Capability** - Business and technical capabilities
4. **Layer 4: Context** - C4 Level 1 - System landscape
5. **Layer 5: Container** - C4 Level 2 - Technical containers
6. **Layer 6: Component** - C4 Level 3 - Internal components
7. **Layer 7: Code** - Implementation artifacts, GitHub integration

### New Node Types

**MarketNode** (Layer 1)
- Market size and growth rate tracking
- Competitor analysis
- Trend monitoring
- Specialized red color scheme

**OrganisationNode** (Layer 2)
- Business unit structure
- Department hierarchy
- Headcount tracking
- Location management
- Blue color scheme

**CodeNode** (Layer 7)
- GitHub repository integration
- Support for files, classes, functions, schemas, tables
- Language and branch tracking
- Author and commit history
- Clickable GitHub links
- Green color scheme

### Layer Validation System

**New Utility:** `src/utils/layer-validation.ts`

- Enforces architectural consistency
- Prevents mixing incompatible node types
- Clear validation error messages
- Guides users to correct diagram layers

**Integration:**
- Validates drag-and-drop node creation
- Validates toolbar button node creation
- Provides helpful error messages with allowed node types

### Enhanced Property Panel

Extended property editing for all new node types:

**Market Properties:**
- Market size, growth rate
- Competitors (comma-separated)
- Trends (comma-separated)
- Description

**Organisation Properties:**
- Business unit, department
- Headcount (numeric)
- Location
- Description

**Code Properties:**
- GitHub URL (clickable)
- Programming language
- Code type selector (file/class/function/schema/table)
- Repository, branch, file path
- Last commit, authors
- Description

### Updated UI Components

**DiagramTypeSelector**
- All 7 layers in dropdown
- Human-readable layer names
- "Layer 1: Market" through "Layer 7: Code"

**NodeCreationButtons**
- Context-aware buttons for each layer
- Default node data for each type
- Drag-and-drop support maintained

**Command Palette**
- New commands for all layers:
  - "Create New Market Diagram (Layer 1)"
  - "Create New Organisation Diagram (Layer 2)"
  - "Create New Code Diagram (Layer 7)"
  - And more...

---

## Repository Cleanup

- Moved historical documentation to `docs/versions/`
- Simplified README to focus on v2.0.0
- Archived planning and marketing documents
- Reduced README from 824 lines to 372 lines
- Focused content on current features

---

## Technical Details

**Version Updates:**
- manifest.json: 0.8.0 → 2.0.0
- package.json: 0.8.0 → 2.0.0
- All version metadata updated

**Build:**
- Bundle size: 794.7kb
- No breaking changes to existing diagrams
- Backward compatible with v0.8.0 file format

**New Files:**
- `/src/ui/nodes/MarketNode.tsx`
- `/src/ui/nodes/OrganisationNode.tsx`
- `/src/ui/nodes/CodeNode.tsx`
- `/src/utils/layer-validation.ts`

**Modified Files:**
- `/src/types/canvas-types.ts` - Added 3 new node data interfaces
- `/src/ui/canvas-view.tsx` - Registered new node types
- `/src/ui/components/PropertyPanel.tsx` - Extended with new property editors
- `/src/ui/canvas/hooks/useCanvasState.ts` - Integrated validation
- `/src/main.ts` - Added new diagram creation commands

---

## Upgrade Instructions

### From v0.8.0 to v2.0.0

**No Breaking Changes!**

1. Download `bac4-v2.0.0.zip` from this release
2. Extract to your vault's `.obsidian/plugins/bac4/` folder
3. Reload Obsidian (Cmd+R / Ctrl+R)
4. Existing diagrams will continue to work
5. New diagram types available immediately

**Note:** Existing Context, Container, Component diagrams are fully compatible and will continue to work as before.

---

## What's Next

### v2.1.0 - Enhanced Navigation (Planned)
- Click-through navigation between layers
- Breadcrumb trail across architectural layers
- Enhanced drill-down experience

### v2.2.0 - AI Integration (Planned)
- AI-powered diagram generation
- Anthropic API integration
- MCP workflow support

### v3.0.0 - Enterprise Features (Planned)
- Planned vs. Actual tracking
- Architectural drift detection
- Estate dashboard
- Team collaboration features

---

## Acknowledgments

Built with The BMAD Method (Breakthrough Method of Agile AI-driven Development) in partnership with Claude Code.

---

## Links

- **GitHub Repository:** https://github.com/DavidROliverBA/bac4
- **Documentation:** [README.md](../../README.md)
- **Developer Guide:** [CLAUDE.md](../../CLAUDE.md)

---

**Full Changelog:** https://github.com/DavidROliverBA/bac4/compare/v0.8.0...v2.0.0
